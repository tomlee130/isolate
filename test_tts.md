# TTS功能测试指南

## 测试步骤

### 1. 运行项目
```bash
cd isolate
flutter run --debug
```

### 2. 测试TTS功能

#### 步骤1：进入源代码浏览器
1. 启动应用后，点击右上角的"查看源代码"按钮
2. 进入源代码浏览器界面

#### 步骤2：测试TTS朗读
1. 点击任意代码文件（如main.dart）
2. 在代码查看页面，点击右上角的"朗读全文"按钮（音量图标）
3. 观察是否有语音输出
4. 朗读过程中可以点击"停止"按钮中断

#### 步骤3：测试TTS功能
1. 点击右上角的"测试TTS"按钮（调试图标）
2. 观察控制台输出和SnackBar提示
3. 确认TTS功能是否正常工作

### 3. 平台特定测试

#### iOS平台
- 应该显示"iOS平台，使用系统默认TTS引擎"
- 不会出现`getEngines`相关的错误
- 使用iOS系统语音合成

#### Android平台
- 会显示可用的TTS引擎列表
- 优先使用Google TTS引擎
- 支持多种厂商TTS引擎

### 4. 错误处理测试

#### 测试场景1：空文件
1. 打开一个空文件
2. 点击朗读按钮
3. 应该显示"文件为空，无法朗读"

#### 测试场景2：网络问题
1. 断开网络连接
2. 尝试朗读功能
3. 应该显示相应的错误提示

### 5. 功能验证清单

- [ ] TTS初始化成功
- [ ] 代码文件朗读功能正常
- [ ] Markdown文件朗读功能正常
- [ ] 停止朗读功能正常
- [ ] 测试TTS功能正常
- [ ] 错误处理机制正常
- [ ] 平台兼容性良好

## 常见问题解决

### 问题1：iOS平台出现MissingPluginException
**解决方案**：已通过平台检测和适配解决

### 问题2：Android平台TTS引擎不可用
**解决方案**：会自动降级到系统默认引擎

### 问题3：语音质量不佳
**解决方案**：可以调整语速和音量设置

## 预期结果

### 成功标志
- 能够听到清晰的语音朗读
- 控制台显示正确的TTS信息
- 用户界面响应正常
- 错误处理机制工作正常

### 失败标志
- 没有语音输出
- 出现异常错误
- 界面卡死或无响应
- 权限被拒绝

## 测试环境要求

- iOS 12.0+
- Android API 21+
- Flutter 3.22.0+
- 网络连接正常
- 设备音量开启 